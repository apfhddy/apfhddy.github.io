네트워크란? 
두대 이상의 컴퓨터들이 모종의 연결 수단을 사용하여 **!!연결!!**되어 있는 것을 말한다.
ex) usb를 통해 컴퓨터와 핸드폰의 연결해본적이 있다면 이미 네트워크를 구성해 봣다 할 수 있다.
!!네트워크를 연결하면 연결된 다른 컴퓨터와 데이터를 주고받을 수도 자원을 사용할 수도 있다.


네트워크의 분류

#### 크기 분류
LAN (Local Area Network)
근거리 통신망
같은 건물끼리 통신가능 
하나의 작은 네트워크

WAN (Wide Area Network)
멀리 있는 지역을 한데 묶은 네트워크
!!!가까운 지역끼리 묶인 LAN과 LAN을 다시 하나로 묶은 것!!!!
 
##### 연결 형태
star 
중앙 장비에 모든 노드가 연결된 방법
일반적으로 가정집에서는 공유기를 통해서 핸드폰 컴퓨터 TV등등이 연결된다
이 때 만약 공유기가 고장난다면 그 가정집에서는 인터넷을 이용할 수 없다.
보통 하나의 LAN대역을 만들때 star형태로 만든다.
mesh 
여러 노드들이 서로 그물처럼 연결된 방법
LAN처럼 특정 한군데에만 의존하는 것이 아닌 모두가 의존하는 방식
즉 하나가 고장 나더라도 고장난 쪽으로 통신하는 것이 아닌 다른 연결된 쪽으로 통신한다.
실제로 다른 나라와 통신할때에 이런 방식을 함으로써 일본쪽 통신선이 마비되어도
대만으로 통해 우회해 일본과 통신이 가능하다.
대신 구조가 튼튼한 만큼 구축비용이 높고 복잡도로 인한 관리가 어렵
ring 


#### 통신방식
유니 캐스트
특정 대상이랑만 1:1 통신

멀티 캐스트
특정 다수와 1:N으로 통신

브로드 캐스트
네트워크에 있는 모든 대상과 통신

그럼 특정대상, 특정다수를 선택할 수 있다는 것은 고유의 표현방법이 있다는 것인데 
네트워크 속의 고유 표현방법은 어떤 것 일까

네트워크 통신망에서 컴퓨터랑 통신을 할때엔 프로토콜이란 것을 사용한다.
#### 네트워크 프로토콜
일종의 약속, 양식
택배를 보낼때 택배의 양식이 있듯이 네트워크 또한 양식있고 그 양식에 맞게 보내야한다.

가까운 곳과 연락할 때
Ethernet 프로토콜(MAC 주소)

멀리 있는 곳과 연락할 때
ICMP
IPv4
ARP
(IP 주소)

여러가지 프로그램으로 연락할 때
TCP,UDP (포트 번호)

그럼 저것들중 하나만 써서 보내느냐? 그게 아니라
여러 프로토콜들로 캡슐화 된 패킷을 만들어 보내게 된다
예시로
내가 보내고 싶은 			[데이터]
내가 어떤 프로그램이랑 통신 할지 	[TCP]
얼마나 멀리 떨어져 있는 지역인지	[IPv4]
특정 컴퓨터를 찾아가는		[Ethernet]
이것을 [Ethernet, IPv4, TCP, 데이터] 이렇게 하나의 패킷으로 만들어 보내게 된다.

## 네트워크 계층 모델 계층
* TCP/IP
4 응용
3 전송
2 네트워크
1 네트워크 인터페이스
* OSI 7 Layer
7 응용
6 표현
5 세션
4 전송
3 네트워크
2 데이터 링크
1 물리

## 공통점
* 계층적 네트워크 모델
* 계층간 역할 정의

## 차이점
* 계층의 수 차이
* OSI는 역할 기반, TCP/IP는 프로토콜 기반
* OSI는 통신 전반에 대한 표준
* TCP/IPsms 데이터 전송기술 특화

## 패킷이란?
네트워크 상에서 전달되는 데이터를 통칭하는 말로 네트워크에서 전달하는 데이터의 형식화된 블록이다.
패킷은 제어 정보와 사용자 데이터로 이루어지며 사용자 데이터는 페이로드라고도 한다.
패킷은 마치 마트료시카와 비교할 수있다. 데이터를 여러번 포장한 형식이다.

## 보낼땐 캡슐화 는 공부 더해야 할듯
하위계층앞에 상위계층 프로토콜은 붙을 수 없다!!!!!!!

## 받을땐 디캡슐화 


## 계층별 역활
#### 2계층
##### 특징
2계층은 하나의 네트워크 대역 즉, 같은 네트워크 상에 존재하는 여러 장비들 중에서 어떤 장비가 어떤 장비에게 보내는 데이터를 전달
추가적으로 오류제어, 흐름제어 수행

2계층은 하나의 네트워크 대역 LAN에서만 통신할 때 사용한다.
즉 다른 네트워크와 통신할 때는 항상 3계층이 도와주어야한다.

3계층의 주소와 3계층의 프로토콜을 이용하여야만 다른 네트워크와 통신이 가능하다.
##### 2계층에서 사용하는 주소
LAN에서 통할 때 사용하는 MAC주소를 사용한다.
mac주소는 16진수로 이루어져있다.
예시로 mac주소가 6c-29-95-04-EB-A1 있다고 봣을때 절반을 나눈  
6c-29-95부분은 **OUI**이다.
OUI란  네트워크 인터페이스 카드 제조사 식별번호이다. 삼성이 식별번호가 4c-29-12라면 삼성 노트북엔 앞이 전부 저렇게 붙는다.
나머지 04-EB-A1부분은  **고유번호**이다. 제조사에 부여하는 기계하나하나 다르게 부여하는 그기계의 고유한 번호이다

ethernet 패킷을 보게 되면 라우터 mac주소  보낸 mac주소 그리고 ethernt type이 오게 된다.
ethernet type은 두개 올수 있는데 08 00 = IPv4 , 08 06 = ARP다.

대표장비 스위치

#### 3계층
##### 특징
3계층은 다른 네트워크 대역 즉, 멀리 떨어진 곳에 존재하는 네트워크까지 어떻게 데이터를 전달할지 제어하는 일을 담당
발신에서 착신까지의 패킷의 경로를 제어

대표장비 라우터

3계층에서 통신할때는 IPv4외에 서브넷 마스크, 기본 게이트웨이 주소를 사용하여 통신을 한다.
IPv4 : 현재 PC에 할당된 IP주소
서브넷 마스크 : IP주소에 대한 네트워크의 대역을 규정하는 것
게이트웨이 주소 : 외부와 통신할 때 사용하는 네트워크의 출입구

각 주소의 한필드에는 8bit 숫자까지만 들어 올 수 있다.
예를 들어 192.168.0.1이라는 주소가 있다고 했을때 . 으로 필드를 나누면 192 / 168 / 0 / 1 이 되는데 각가지 필드에는 255까지만 나올수 있다는 말이다.
즉 3자리이니 999까지 나올 수 있을거 같지만 255까지로 IP주소를 만든다.

옛날에는 핸드폰도 없었고 컴퓨터도 비싸서 Classful ip형식으로 ip만으로 네트워크 대역을 구분했지만 현대가 되서는 낭비가 심하다는 단점을 알고
서브넷 마스크로 네트워크 대역을 구분하게 됫다.
기본 게이트웨이는 공유기 주소를 나타낸다

하지만 이방법으로도 ip대역 부족 현상이 일어낫고 그때 IPv6로 이야기가 나왓지만 바꾸기 어렵단점 때문에 **사설IP와 공인IP라는 개념이 나왓다**
**사설IP와 공인IP**
* 사설 IP란 한 대역에 각자의 IP(IPv4)가 있다. 하지만 이것은 고유의 값이 아닌 다른 대역에서도 중복된 값일 수도 있다.
* 공인IP란 내가 속한 대역에서 데이터를 보낼때나 받을때 사용하는 IP이다. 즉 내가 naver도메인으로 HTML파일을 받아올때!!!사설IP에서 공인IP로 변경되고 공인IP를 사용한다.
공인IP는 라우터(공유기)에서 있으므로 즉 라우터가 데이터를 받아와 사설IP로 누구한태 줘야하는지를 구분에 데이터를 전송한다.
이렇게 사설 IP에서 공인IP로 바뀌는 것은 **NAT**이라고 한다.


##### ARP 프로토콜
ARP프로토콜은 **같은 네트워크 대역**에서 통신을 하기위해 필요한 MAC주소를 IP주소를 이용해서 알아오는 프로토콜이다  
같은 네트워크 대역에서 통신을 한다고 하더라도 데이터를 보내기 위해서는 7계층부터 캡슐화를 통해 데이터를 보내기  
때문에 IP주소와 MAC주소가 모두 필요하다. 이때 IP주소는 알고 MAC주소는 모르더라도 ARP를 통해 통신이 가능하다.  

즉 mac주소는 모르고 IP주소로만 통신할때 사용하는 것이겠네.

##### 어떻게 ip주소 mac주소를 가져올까?
일단 발신측에서 ARP패킷을 만드는데 목적지의 MAC주소는 0으로 채운다. 모르기 때문에
단 IP만 적어서 ARP패킷을 완성한다.
그리고 해더에 2단계인 ethernet패킷을 만드는데 보낸 MAC주소는 F로 채워서 2단계 장비인 스위치에게 보내게 된다.
스위치를 통해 스위치가 2계층 ethernet프로토콜은 디캡슐에서 확인후 연결된 모든 장비에게 3계층 ARP패킷을 보낸다
장비들은 3계층 프로토콜은 확인 후 받는 IP가 일치하는 컴퓨터만 가지고 나머지는 버린다.
받은 장비는 자신도 ARP패킷을 만들어 자신의 MAC주소를 적어 응답하게 된다.
그럼 처음 보낸 장비는 응답을 받음으로써 ARP캐시 테이블에 해당 IP와 MAC을 저장시킨다.


데이터의 최소 단위 60byte 최대 단위
#### 3계층 
##### IPv4 프로토콜
네트워크 상에서 데이터를 교환하기 위한 프로토콜 **데이터가 정확하게 전달될 것을 보장하지 않는다!!!**
중복된 패킷을 전달하거나 패킷의 순서를 잘못 전달할 가능성도 있음.( 악의적으로 이용되면 DoS 공격이 됨 )

데이터의 정확하고 순차적인 전달은 그보다 상위 프로토콜인 TCP에서 보장한다.


##### IPv4의 조각화
IPv4는 장비마다 차이는 있지만  3000byte 데이터를 보낼 수 있는데 그 이상을 보내야 한다면? 데이터를 조각조각 나누어서 전송해야한다. 

2379 
960 960 459


##### ICMP ( Internet Control Message Protocol ) 프로토콜
인터넷 제어 메시지 프로토콜
네크워크 컴퓨터 위엥서 돌아가는 운영체제에서 오류 메시지를 전송 받는 데 주로 쓰인다.
프로토콜 구조의 Type과 Code를 통해 오류 메시지를 전송 받는다

#### 4계층
전송계층은 송신자의 프로세스와 수진자의 프로세스를 연결하는 통신 서비스를 제공한다
전송 계층은 연결 지향 데이터 스트림 지원 신뢰성, 흐름 제어, 그리고 다중화와 같은 편리한 서비스를 제공한다.
전송 프로토콜 중 가장 잘알려진 것은 

##### TCP

전송 제어 프로토콜 TCP는은 인터넷에 연결된 컴퓨터에서 실행되는 프로그램 간에 통신을 안정적으로 순서대로 에러없이 교환할 수 있게 한다.
TCP의 안정성을 필요로 하지 않는 애플리케이션의 경우 일반적으로 TCP 대신 비저복형 사용자 데이터그램 프로토콜을 사용한다. TCP는 UDP보다 안전하지만 느리다

###### 통신 방법
TCP를 이용한 데이터 통신을 할 때 프로세스와 프로세슷를 연결하기 위해 가장 먼저 수행되는 과정

1. 클라이언트가 서버에게 요청 패킷을 보내고
2. 서버가 클라이언트의 요청을 받아들이는 패킷을 보내고
3, 클라이언트는 이를 최종적으로 수학하는 패킷을 보낸다.

위의 3개의 과정을 3Way Handshake하고 한다.
